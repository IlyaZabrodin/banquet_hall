{% extends 'orders_base.html' %}

{% block nav_items %}
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            –†–∞–±–æ—Ç–∞ —Å –∑–∞–ø—Ä–æ—Å–∞–º–∏
        </a>
        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item" href="{{ url_for('bp_query.form_render') }}">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–µ–Ω—é —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</a></li>
        </ul>
    </li>
{% endblock %}
{% block internal_user_menu_for_manager %}
<div class="orders-container">
    <h2 class="mb-4">–ó–∞–∫–∞–∑—ã –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –≤–∞—Å üî•</h2>
    {% if render_data['status'] %}
    <table class="orders-table manager">
        <thead>
            <tr>
                <th>–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞</th>
                <th>–í—Ä–µ–º—è –±–∞–Ω–∫–µ—Ç–∞</th>
                <th>–û–∂–∏–¥–∞–µ–º–æ–µ —á–∏—Å–ª–æ —á–µ–ª–æ–≤–µ–∫</th>
                <th>–ù–æ–º–µ—Ä –∑–∞–ª–∞</th>
                <th>–ê–≤–∞–Ω—Å</th>
                <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–ª—é–¥</th>
                <th>–†–µ–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</th>
                <th>–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞</th>
                <th>–¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞</th>
                <th>ID –∫–ª–∏–µ–Ω—Ç–∞</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for ord_id, time, place_amount, hall, prepaid_exp, dish_am, cost, status, phone, user in render_data['data'] %}
            <tr class="{% if status != '–ó–∞–≤–µ—Ä—à–µ–Ω' %}new-order{% endif %}">
                <td><span class="order-number">#{{ ord_id }}</span></td>
                <td>{{ time }}</td>
                <td>{{ place_amount }}</td>
                <td>{{ hall }}</td>
                <td>{{ prepaid_exp }}</td>
                <td>{{ dish_am }}</td>
                <td>{{ cost }}</td>
                <td>
                    {% set status_classes = {
                        '–í –æ–±—Ä–∞–±–æ—Ç–∫–µ': 'status-processing',
                        '–ñ–¥–µ—Ç –æ–ø–ª–∞—Ç—ã': 'status-waiting-payment',
                        '–û—Ç–º–µ–Ω–µ–Ω': 'status-cancelled',
                        '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω': 'status-confirmed',
                        '–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ñ–æ—Ä–º–ª–µ–Ω': 'status-pending',
                        '–ó–∞–≤–µ—Ä—à–µ–Ω': 'status-completed'
                    } %}

                    <span class="status {{ status_classes[status] }}">
                        {{ status }}
                    </span>
                </td>
                <td>{{ phone }}</td>
                <td>{{ user }}</td>
                <td>
                {% if status == '–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ñ–æ—Ä–º–ª–µ–Ω' %}
                    <a class="btn-custom btn-primary-custom" href="{{ url_for('bp_dish_list.basket_index', order_id=ord_id) }}">–ü—Ä–∞–≤–∏—Ç—å —á–µ–∫ –∑–∞–∫–∞–∑–∞</a><br><br>
                    <a class="btn-custom btn-warning-custom" href="{{ url_for('bp_query.form_render', order_id=ord_id) }}">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–∫–∞–∑</a><br><br>
                {% endif %}
                <form action="{{ url_for('cancel_order_handler', order_id=ord_id) }}" method="post">
                    <button class="btn-custom btn-danger-custom" type="submit">–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑</button>
                </form></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
        <div class="success-message">
            –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–∞ –≤–∞—Å –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –∑–∞–∫–∞–∑–æ–≤.
        </div>
    {% endif %}
</div>
{% endblock %}